# Generators

`gowebutils` comes with a set of generators that can be used to generate boilerplate code for common tasks using your database schema as a starting point. Install the generator CLI by running the following command:

```sh
go install github.com/gurch101/gowebutils/cmd/generator@latest
```

In any project directory with the `DB_FILEPATH` environment variable set, you can run the generator by running `generator` in the terminal and follow the prompts. Enter the name of the database tables you want to generate code for and the actions you want to support and the generator will create the following files:

- `internal/<dbtable>/models.go` - This file contains the database model for the table you specified.
- `internal/<dbtable>/create_<dbtable>.go` - This file contains a handler, service, and repository to create a new record in the database.
- `internal/<dbtable>/get_<dbtable>_by_id.go` - This file contains a handler, service, and repository to get a record from the database by id.
- `internal/<dbtable>/search_<dbtable>.go` - This file contains a handler, service, and repository to search for records in the database by enabling pagination, filter on any field, and sort by any field. You can also control the fields that are returned in the response.
- `internal/<dbtable>/update_<dbtable>.go` - This file contains a handler, service, and repository to update a record in the database via a PATCH request.

Each program will have a corresponding end-to-end test file named `internal/<dbtable>/<progname>_test.go`.

Each handler will have comments which can be used to generate openAPI documentation using `swaggo`.

All code generated by the generator is intended to be used as a starting point for your application. You can modify the code to suit your specific needs. Generated code should be checked into your repository and versioned alongside your application code.

There are certain conventions that you should use in your database schema for optimal generator use:

- The primary key of the table should be named `id` and should be of type `int64`.
- Table names should be plural and snake case.
- Column names should be snake case.
- All table names and column names should be lowercase.
- `CHECK` constraints of the form `CHECK (column_name <> '')` adds a required check on the create/update endpoints for the given column.
- Column names that contain 'email' are assumed to be email addresses and will be validated on the create/update endpoints.
